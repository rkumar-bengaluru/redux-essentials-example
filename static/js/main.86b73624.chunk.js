(this["webpackJsonpredux-essentials-example"]=this["webpackJsonpredux-essentials-example"]||[]).push([[0],{1589:function(e,t){},1592:function(e,t,n){"use strict";n.r(t);var r,s=n(1),c=n.n(s),a=n(33),o=n.n(a),i=(n(81),n(4)),u=n(19),d=n(0),l=function(e){var t=e.userId,n=Object(i.c)((function(e){return e.users.find((function(e){return e.id===t}))}));return Object(d.jsxs)("span",{children:["by ",n?n.name:"Unknown author"]})},j=n(1594),b=n(1593),p=function(e){var t=e.timestamp,n="";if(t){var r=Object(j.a)(t),s=Object(b.a)(r);n="".concat(s," ago")}return Object(d.jsxs)("span",{title:t,children:["\xa0 ",Object(d.jsx)("i",{children:n})]})},O=n(15),f=n(20),h=n(8),x=n.n(h),m=n(17),v=n(7),g=n(21),y=n(75),N=["body"];function k(e){return w.apply(this,arguments)}function w(){return(w=Object(m.a)(x.a.mark((function e(t){var n,r,s,c,a,o,i,u=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},r=n.body,s=Object(y.a)(n,N),c={"Content-Type":"application/json"},a=Object(g.a)(Object(g.a)({method:r?"POST":"GET"},s),{},{headers:Object(g.a)(Object(g.a)({},c),s.headers)}),r&&(a.body=JSON.stringify(r)),e.prev=4,e.next=7,window.fetch(t,a);case 7:return i=e.sent,e.next=10,i.json();case 10:if(o=e.sent,!i.ok){e.next=14;break}return console.log(o),e.abrupt("return",o);case 14:throw new Error(i.statusText);case 17:return e.prev=17,e.t0=e.catch(4),e.abrupt("return",Promise.reject(e.t0.message?e.t0.message:o));case 20:case"end":return e.stop()}}),e,null,[[4,17]])})))).apply(this,arguments)}k.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return k(e,Object(g.a)(Object(g.a)({},t),{},{method:"GET"}))},k.post=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return k(e,Object(g.a)(Object(g.a)({},n),{},{body:t}))};var C=Object(v.b)("posts/fetchPosts",Object(m.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("/fakeApi/posts");case 2:return t=e.sent,e.abrupt("return",t.posts);case 4:case"end":return e.stop()}}),e)})))),A=Object(v.b)("posts/addNewPost",function(){var e=Object(m.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("/fakeApi/posts",{post:t});case 2:return n=e.sent,e.abrupt("return",n.post);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),S=Object(v.c)({name:"posts",initialState:{posts:[],status:"idle",error:null},reducers:{reactionAdded:function(e,t){var n=t.payload,r=n.postId,s=n.reaction,c=e.posts.find((function(e){return e.id===r}));c&&c.reactions[s]++},postUpdated:function(e,t){var n=t.payload,r=n.id,s=n.title,c=n.content,a=e.posts.find((function(e){return e.id===r}));a&&(a.title=s,a.content=c)}},extraReducers:(r={},Object(f.a)(r,C.pending,(function(e,t){e.status="loading"})),Object(f.a)(r,C.fulfilled,(function(e,t){e.status="succeeded",e.posts=e.posts.concat(t.payload)})),Object(f.a)(r,C.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(f.a)(r,A.fulfilled,(function(e,t){e.posts.push(t.payload)})),r)}),_=S.actions,I=(_.postAdded,_.postUpdated),P=_.reactionAdded,T=S.reducer,E=function(e){return e.posts.posts},R=function(e,t){return e.posts.posts.find((function(e){return e.id===t}))},F={thumbsUp:"\ud83d\udc4d",hooray:"\ud83c\udf89",heart:"\u2764\ufe0f",rocket:"\ud83d\ude80",eyes:"\ud83d\udc40"},B=function(e){var t=e.post,n=Object(i.b)(),r=Object.entries(F).map((function(e){var r=Object(O.a)(e,2),s=r[0],c=r[1];return Object(d.jsxs)("button",{type:"button",className:"muted-button reaction-button",onClick:function(){return n(P({postId:t.id,reaction:s}))},children:[c," ",t.reactions[s]]},s)}));return Object(d.jsx)("div",{children:r})},U=function(e){var t=e.post;return Object(d.jsxs)("article",{className:"post-excerpt",children:[Object(d.jsx)("h3",{children:t.title}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l,{userId:t.user}),Object(d.jsx)(p,{timestamp:t.date})]}),Object(d.jsx)("p",{className:"post-content",children:t.content.substring(0,100)}),Object(d.jsx)(B,{post:t}),Object(d.jsx)(u.b,{to:"/posts/".concat(t.id),className:"button muted-button",children:"View Post"})]},t.id)},D=function(){var e,t=Object(i.b)(),n=Object(i.c)(E),r=Object(i.c)((function(e){return e.posts.status})),c=Object(i.c)((function(e){return e.posts.error}));if(Object(s.useEffect)((function(){"idle"===r&&t(C())}),[r,t]),"loading"===r)e=Object(d.jsx)("div",{className:"loader",children:"Loading..."});else if("succeeded"===r){e=n.slice().sort((function(e,t){return t.date.localeCompare(e.date)})).map((function(e){return Object(d.jsx)(U,{post:e},e.id)}))}else"error"===r&&(e=Object(d.jsx)("div",{children:c}));return Object(d.jsxs)("section",{className:"posts-list",children:[Object(d.jsx)("h2",{children:"Posts"}),e]})},M=function(){var e=Object(s.useState)(""),t=Object(O.a)(e,2),n=t[0],r=t[1],c=Object(s.useState)(""),a=Object(O.a)(c,2),o=a[0],u=a[1],l=Object(s.useState)(""),j=Object(O.a)(l,2),b=j[0],p=j[1],f=Object(s.useState)("idle"),h=Object(O.a)(f,2),g=h[0],y=h[1],N=Object(i.b)(),k=Object(i.c)((function(e){return e.users})),w=[n,o,b].every(Boolean)&&"idle"===g,C=function(){var e=Object(m.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=18;break}return e.prev=1,y("pending"),e.next=5,N(A({title:n,content:o,user:b}));case 5:t=e.sent,Object(v.e)(t),r(""),u(""),p(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("Failed to save the post: ",e.t0);case 15:return e.prev=15,y("idle"),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(){return e.apply(this,arguments)}}(),S=k.map((function(e){return Object(d.jsx)("option",{value:e.id,children:e.name},e.id)}));return Object(d.jsxs)("section",{children:[Object(d.jsx)("h2",{children:"Add a New Post"}),Object(d.jsxs)("form",{children:[Object(d.jsx)("label",{htmlFor:"postTitle",children:"Post Title:"}),Object(d.jsx)("input",{type:"text",id:"postTitle",name:"postTitle",placeholder:"What's on your mind?",value:n,onChange:function(e){return r(e.target.value)}}),Object(d.jsx)("label",{htmlFor:"postAuthor",children:"Author:"}),Object(d.jsxs)("select",{id:"postAuthor",value:b,onChange:function(e){return p(e.target.value)},children:[Object(d.jsx)("option",{value:""}),S]}),Object(d.jsx)("label",{htmlFor:"postContent",children:"Content:"}),Object(d.jsx)("textarea",{id:"postContent",name:"postContent",value:o,onChange:function(e){return u(e.target.value)}}),Object(d.jsx)("button",{type:"button",onClick:C,disabled:!w,children:"Save Post"})]})]})},q=n.p+"static/media/logo.b2e5a01e.svg";function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var z=Object(v.b)("counter/fetchCount",function(){var e=Object(m.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),J=Object(v.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(z.pending,(function(e){e.status="loading"})).addCase(z.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),G=J.actions,W=G.increment,V=G.decrement,X=G.incrementByAmount,H=function(e){return e.counter.value},K=J.reducer,Q=n(18),Y=n.n(Q);function Z(){var e=Object(i.c)(H),t=Object(i.b)(),n=Object(s.useState)("2"),r=Object(O.a)(n,2),c=r[0],a=r[1],o=Number(c)||0;return Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:Y.a.row,children:[Object(d.jsx)("button",{className:Y.a.button,"aria-label":"Decrement value",onClick:function(){return t(V())},children:"-"}),Object(d.jsx)("span",{className:Y.a.value,children:e}),Object(d.jsx)("button",{className:Y.a.button,"aria-label":"Increment value",onClick:function(){return t(W())},children:"+"})]}),Object(d.jsxs)("div",{className:Y.a.row,children:[Object(d.jsx)("input",{className:Y.a.textbox,"aria-label":"Set increment amount",value:c,onChange:function(e){return a(e.target.value)}}),Object(d.jsx)("button",{className:Y.a.button,onClick:function(){return t(X(o))},children:"Add Amount"}),Object(d.jsx)("button",{className:Y.a.asyncButton,onClick:function(){return t(z(o))},children:"Add Async"}),Object(d.jsx)("button",{className:Y.a.button,onClick:function(){return t((e=o,function(t,n){H(n())%2===1&&t(X(e))}));var e},children:"Add If Odd"})]})]})}n(88);var $=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsxs)("header",{className:"App-header",children:[Object(d.jsx)("img",{src:q,className:"App-logo",alt:"logo"}),Object(d.jsx)(Z,{}),Object(d.jsxs)("p",{children:["Edit ",Object(d.jsx)("code",{children:"src/App.js"})," and save to reload."]}),Object(d.jsxs)("span",{children:[Object(d.jsx)("span",{children:"Learn "}),Object(d.jsx)("a",{className:"App-link",href:"https://reactjs.org/",target:"_blank",rel:"noopener noreferrer",children:"React"}),Object(d.jsx)("span",{children:", "}),Object(d.jsx)("a",{className:"App-link",href:"https://redux.js.org/",target:"_blank",rel:"noopener noreferrer",children:"Redux"}),Object(d.jsx)("span",{children:", "}),Object(d.jsx)("a",{className:"App-link",href:"https://redux-toolkit.js.org/",target:"_blank",rel:"noopener noreferrer",children:"Redux Toolkit"}),",",Object(d.jsx)("span",{children:" and "}),Object(d.jsx)("a",{className:"App-link",href:"https://react-redux.js.org/",target:"_blank",rel:"noopener noreferrer",children:"React Redux"})]})]})})},ee=function(e){var t=e.match.params.postId,n=Object(i.c)((function(e){return R(e,t)}));return n?Object(d.jsx)("section",{children:Object(d.jsxs)("article",{className:"post",children:[Object(d.jsx)("h2",{children:n.title}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l,{userId:n.user}),Object(d.jsx)(p,{timestamp:n.date})]}),Object(d.jsx)("p",{className:"post-content",children:n.content}),Object(d.jsx)(B,{post:n}),Object(d.jsx)(u.b,{to:"/editPost/".concat(n.id),className:"button",children:"Edit Post"})]})}):Object(d.jsx)("section",{children:Object(d.jsx)("h2",{children:"Post not found!"})})},te=n(5),ne=function(e){var t=e.match.params.postId,n=Object(i.c)((function(e){return R(e,t)})),r=Object(s.useState)(n.title),c=Object(O.a)(r,2),a=c[0],o=c[1],u=Object(s.useState)(n.content),l=Object(O.a)(u,2),j=l[0],b=l[1],p=Object(i.b)(),f=Object(te.g)();return Object(d.jsxs)("section",{children:[Object(d.jsx)("h2",{children:"Edit Post"}),Object(d.jsxs)("form",{children:[Object(d.jsx)("label",{htmlFor:"postTitle",children:"Post Title:"}),Object(d.jsx)("input",{type:"text",id:"postTitle",name:"postTitle",placeholder:"What's on your mind?",value:a,onChange:function(e){return o(e.target.value)}}),Object(d.jsx)("label",{htmlFor:"postContent",children:"Content:"}),Object(d.jsx)("textarea",{id:"postContent",name:"postContent",value:j,onChange:function(e){return b(e.target.value)}})]}),Object(d.jsx)("button",{type:"button",onClick:function(){a&&j&&(p(I({id:t,title:a,content:j})),f.push("/posts/".concat(t)))},children:"Save Post"})]})},re=function(){return Object(d.jsx)("nav",{children:Object(d.jsxs)("section",{children:[Object(d.jsx)("h1",{children:"Redux Essentials Example"}),Object(d.jsx)("div",{className:"navContent",children:Object(d.jsx)("div",{className:"navLinks",children:Object(d.jsx)(u.b,{to:"/",children:"Posts"})})})]})})};var se,ce=function(){return Object(d.jsxs)(u.a,{children:[Object(d.jsx)(re,{}),Object(d.jsx)("div",{className:"App",children:Object(d.jsxs)(te.d,{children:[Object(d.jsx)(te.b,{exact:!0,path:"/",render:function(){return Object(d.jsxs)(c.a.Fragment,{children:[Object(d.jsx)(M,{}),Object(d.jsx)(D,{})]})}}),Object(d.jsx)(te.b,{exact:!0,path:"/counter",render:function(){return Object(d.jsx)(c.a.Fragment,{children:Object(d.jsx)($,{})})}}),Object(d.jsx)(te.b,{exact:!0,path:"/posts/:postId",component:ee}),Object(d.jsx)(te.b,{exact:!0,path:"/editPost/:postId",component:ne}),Object(d.jsx)(te.a,{to:"/"})]})})]})},ae=Object(v.b)("users/fetchUsers",Object(m.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("/fakeApi/users");case 2:return t=e.sent,e.abrupt("return",t.users);case 4:case"end":return e.stop()}}),e)})))),oe=Object(v.c)({name:"users",initialState:[],reducers:{},extraReducers:Object(f.a)({},ae.fulfilled,(function(e,t){return t.payload}))}).reducer,ie=Object(v.a)({reducer:{counter:K,posts:T,users:oe}}),ue=n(74),de=n(9),le=n(22),je=n.n(le),be=n(30),pe=n(47),Oe=n.n(pe),fe=de.c.extend({serializeIds:"always"}),he=Oe()(),xe=localStorage.getItem("randomTimestampSeed");function me(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(he()*(t-e+1))+e}xe?se=new Date(xe):(xe=(se=new Date).toISOString(),localStorage.setItem("randomTimestampSeed",xe)),he=Oe()(xe),Object(be.setRandom)(he),je.a.seed(se.getTime());var ve=function(e){return e[me(0,e.length-1)]},ge=["poked you","says hi!","is glad we're friends","sent you a gift"];new de.d({routes:function(){this.namespace="fakeApi",this.timing=2e3,this.resource("users"),this.resource("posts"),this.resource("comments");var e=this;this.post("/posts",(function(t,n){var r=this.normalizedRequestAttrs();r.date=(new Date).toISOString();var s=t.users.find(r.userId);if(r.user=s,"error"===r.content)throw new Error("Could not save the post!");return e.create("post",r)})),this.get("/posts/:postId/comments",(function(e,t){return e.posts.find(t.params.postId).comments})),this.get("/notifications",(function(e,t){var n,r=me(1,5),s=new Date;return t.queryParams.since?n=Object(j.a)(t.queryParams.since):(n=new Date(s.valueOf())).setMinutes(n.getMinutes()-15),{notifications:Object(ue.a)(Array(r)).map((function(){var t=ve(e.db.users),r=ve(ge);return{id:Object(v.d)(),date:je.a.date.between(n,s).toISOString(),message:r,user:t.id,read:!1,isNew:!0}}))}}))},models:{user:de.b.extend({posts:Object(de.g)()}),post:de.b.extend({user:Object(de.f)(),comments:Object(de.g)()}),comment:de.b.extend({post:Object(de.f)()}),notification:de.b.extend({})},factories:{user:de.a.extend({id:function(){return Object(v.d)()},firstName:function(){return je.a.name.firstName()},lastName:function(){return je.a.name.lastName()},name:function(){return je.a.name.findName(this.firstName,this.lastName)},username:function(){return je.a.internet.userName(this.firstName,this.lastName)},afterCreate:function(e,t){t.createList("post",3,{user:e})}}),post:de.a.extend({id:function(){return Object(v.d)()},title:function(){return Object(be.sentence)()},date:function(){return je.a.date.recent(7)},content:function(){return Object(be.article)(1)},reactions:function(){return{thumbsUp:0,hooray:0,heart:0,rocket:0,eyes:0}},afterCreate:function(e,t){},user:Object(de.e)()}),comment:de.a.extend({id:function(){return Object(v.d)()},date:function(){return je.a.date.past(2)},text:function(){return Object(be.paragraph)()},post:Object(de.e)()})},serializers:{user:fe,post:fe,comment:fe},seeds:function(e){e.createList("user",3)}}),ie.dispatch(ae()),o.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(i.a,{store:ie,children:Object(d.jsx)(ce,{})})}),document.getElementById("root"))},18:function(e,t,n){e.exports={row:"Counter_row__1p9CU",value:"Counter_value__25Ar_",button:"Counter_button__3-q-t",textbox:"Counter_textbox__3yllT",asyncButton:"Counter_asyncButton__2XCS- Counter_button__3-q-t"}},81:function(e,t,n){},88:function(e,t,n){}},[[1592,1,2]]]);
//# sourceMappingURL=main.86b73624.chunk.js.map